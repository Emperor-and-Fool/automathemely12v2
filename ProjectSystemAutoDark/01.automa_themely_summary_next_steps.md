## 1) What we discovered today
- **AutomaThemely *does* run and can switch KDE theme manually** when invoked via your venv:
  - `/home/skdj/Pysolated/penv_automathemely12v2/bin/automathemely --dark`
- Your system python cannot `import automathemely`, which confirms it’s **not installed system-wide**.
- Your autostart `.desktop` currently runs:
  - `source <venv>/bin/activate; cd <repo>; PYTHONPATH=$PWD python -m bin.run --restart`
- `--restart` prints **“Restarted the scheduler”** but **no scheduler process stays alive** afterward.
- Root cause candidate in code:
  - `autoth_tools/argmanager.py` uses `Popen(['python3', ...])`
  - That can launch **outside the venv**, and/or fail silently (stdout/stderr go to DEVNULL).

## 2) How we discussed solving it (installable-app mindset)
Goal: stop hardcoding “activate venv” in `.desktop` / systemd.
Instead, make **one stable entrypoint command** that always runs the right python and can later be packaged.

Target design:
- A user-visible executable: `automathemely` (wrapper)
- That wrapper always launches with the intended python runtime.
- `.desktop` files call only `automathemely ...` (no `source`, no `PYTHONPATH` hacks).

## 3) Options we explored
- **Quick fix inside current dev setup**
  - Replace subprocess calls from `'python3'` → `sys.executable`.
- **Installable app direction**
  - Provide a single entrypoint executable placed in `~/.local/bin/automathemely` (or packaged later).
  - Eventually: proper packaging (pip/flatpak/etc.).

## 4) Actual starting point for changes
- Search hits for `python3` in repo show:
  - real runtime issue: `autoth_tools/argmanager.py` `Popen(['python3', ...])`
  - plus “noise” hits: shebang lines (`#!/usr/bin/env python3`)
  - plus install templates:
    - `lib/installation_files/autostart.desktop`
    - `lib/installation_files/sun-times.service`

## 5) The change we are working on now
Current work item:
- Create a stable executable entrypoint `automathemely` (wrapper) in `~/.local/bin`.
- Then update autostart/systemd templates to call that entrypoint.

Immediate code fix to support scheduler reliability:
- In `autoth_tools/argmanager.py`, change:
  - `Popen(['python3', ...])`
  - to:
  - `Popen([sys.executable, ...])`
  - and ensure `import sys` exists.

Notes from testing
- Your patched attempt made **no visible difference** yet:
  - restart still prints success
  - but `pgrep` shows no scheduler process
  - because the scheduler is started detached and logs are discarded
  - so next debugging step is to **log scheduler stdout/stderr** instead of DEVNULL.

